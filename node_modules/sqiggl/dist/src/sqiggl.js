var lexer_1 = require('./lexer');
var parser_1 = require('./parser');
/**
 * Parses a SQiggL query and outputs the raw SQL.
 *
 * @param query {string} - The SQiggL query to parse.
 * @param variables {ScopedVariables} - A map of variables to use while parsing.
 * @param options {SQiggLOptions} - The options to use for parsing
 * @returns {string} - The raw SQL query output.
 */
function parse(query, variables, options) {
    var lexer = new lexer_1.Lexer(options);
    var dsl = lexer.parse(query);
    var parser = new parser_1.Parser(options);
    return parser.parse(dsl, variables);
}
/**
 * The SQiggL library export.
 *
 * @type {{parse: (function(string, ScopedVariables=, SQiggLOptions=): string)}}
 */
exports.SQiggL = { parse: parse };
